
<!DOCTYPE html>
<html lang="en">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>Usage — Infection PHP</title>
        <meta charset="utf-8">
        <meta name="description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="Usage — Infection PHP">
        <meta property="og:description" content="Infection - PHP Mutation Testing Framework.">
        <meta property="og:image" content="https://infection.github.io//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="Usage — Infection PHP">
        <meta name="twitter:description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="twitter:image" content="https://infection.github.io/images/logo.png">

        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Dosis:500&text=Infection PHP" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "guide"</script>
    </head>
    <body class="docs">        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Infection</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

    </ul>
    <div class="list">
        <ul class="menu-root">
    
        
        
            
                <li><h3>Documentation</h3></li>
            
            
        
        
        <li>
            <a href="/guide/index.html" class="sidebar-link">Introduction</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/installation.html" class="sidebar-link">Installation</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/usage.html" class="sidebar-link current">Usage</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/command-line-options.html" class="sidebar-link">Command Line Options</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/mutators.html" class="sidebar-link">Mutators</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/custom-mutators.html" class="sidebar-link new">Custom Mutators</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/profiles.html" class="sidebar-link">Profiles</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/using-with-ci.html" class="sidebar-link">Using with CI</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/mutation-badge.html" class="sidebar-link">Mutation Badge, cloud HTML report</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/how-to.html" class="sidebar-link">How-to Guides</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/caveats.html" class="sidebar-link">Caveats</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/debugging-issues.html" class="sidebar-link">Debugging Issues</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/infection-playground.html" class="sidebar-link">Infection Playground</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/github-sponsors.html" class="sidebar-link">GitHub Sponsors ♥️</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/supported-test-frameworks.html" class="sidebar-link">Supported Test Frameworks</a>
        </li>
    
        
        
            
            
                <li><h3>Miscellaneous</h3></li>
            
        
        
        <li>
            <a href="/guide/compare.html" class="sidebar-link">Compare with competitors</a>
        </li>
    
    <li><h3>Posts</h3></li>
    
        <li>
            <a href="/2022/01/10/whats-new-in-0.26.0/" class="sidebar-link">What's new in Infection 0.26.0</a>
        </li>
    
        <li>
            <a href="/2021/09/06/whats-new-in-0.25.0/" class="sidebar-link">What's new in Infection 0.25.0</a>
        </li>
    
        <li>
            <a href="/2021/07/27/whats-new-in-0.24.0/" class="sidebar-link">What's new in Infection 0.24.0</a>
        </li>
    
        <li>
            <a href="/2021/05/13/whats-new-in-0.23.0/" class="sidebar-link">What's new in Infection 0.23.0</a>
        </li>
    
        <li>
            <a href="/2021/01/27/whats-new-in-0.21.0/" class="sidebar-link">What's new in Infection 0.21.0</a>
        </li>
    
    
</ul>

    </div>
</div>


<div class="content guide with-sidebar usage-guide">
    
      
    
    
      <h1>Usage</h1>
    
    <h2 id="Configuration"><a href="#Configuration" class="headerlink" title="Configuration"></a>Configuration</h2><p>The first time you run Infection for your project, it will ask you several questions to create a config file <code>infection.json5</code>, with the following structure:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"source"</span>: &#123;</span><br><span class="line">        <span class="attr">"directories"</span>: [</span><br><span class="line">            <span class="string">"src"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"excludes"</span>: [</span><br><span class="line">            <span class="string">"Config"</span>,</span><br><span class="line">            <span class="string">"Folder/with/File.php"</span>,</span><br><span class="line">            <span class="string">"/\\.interface\\.php/"</span>,</span><br><span class="line">            <span class="string">"&#123;Infrastructure/.*&#125;"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"timeout"</span>: <span class="number">10</span>,</span><br><span class="line">    <span class="attr">"logs"</span>: &#123;</span><br><span class="line">        <span class="attr">"text"</span>: <span class="string">"infection.log"</span>,</span><br><span class="line">        <span class="attr">"html"</span>: <span class="string">"infection.html"</span>,</span><br><span class="line">        <span class="attr">"summary"</span>: <span class="string">"summary.log"</span>,</span><br><span class="line">        <span class="attr">"json"</span>: <span class="string">"infection-log.json"</span>,</span><br><span class="line">        <span class="attr">"perMutator"</span>: <span class="string">"per-mutator.md"</span>,</span><br><span class="line">        <span class="attr">"github"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"gitlab"</span>: <span class="string">"gitlab-code-quality.json"</span>,</span><br><span class="line">        <span class="attr">"stryker"</span>: &#123;</span><br><span class="line">            <span class="attr">"badge"</span>: <span class="string">"/^release-.*$/"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"summaryJson"</span>: <span class="string">"summary.json"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"tmpDir"</span>: <span class="string">"/opt/tmp-folder"</span>,</span><br><span class="line">    <span class="attr">"phpUnit"</span>: &#123;</span><br><span class="line">        <span class="attr">"configDir"</span>: <span class="string">"app"</span>,</span><br><span class="line">        <span class="attr">"customPath"</span>: <span class="string">"\/path\/to\/phpunit-6.1.phar"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"global-ignore"</span>: [</span><br><span class="line">            <span class="string">"FooClass::__construct"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"global-ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">            <span class="string">"Assert::.*"</span></span><br><span class="line">        ],</span><br><span class="line">        <span class="attr">"@default"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"@function_signature"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"TrueValue"</span>: &#123;</span><br><span class="line">            <span class="attr">"ignore"</span>: [</span><br><span class="line">                <span class="string">"NameSpace\\*\\Class::method"</span></span><br><span class="line">            ],</span><br><span class="line">            <span class="attr">"ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">                <span class="string">"\\$this-&gt;logger.*"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"testFramework"</span>:<span class="string">"phpunit"</span>,</span><br><span class="line">    <span class="attr">"bootstrap"</span>:<span class="string">"./infection-bootstrap.php"</span>,</span><br><span class="line">    <span class="attr">"initialTestsPhpOptions"</span>: <span class="string">"-d zend_extension=xdebug.so"</span>,</span><br><span class="line">    <span class="attr">"testFrameworkOptions"</span>: <span class="string">"--filter=Unit"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>If you want to override settings locally, create and commit to VCS <code>infection.json5.dist</code> but locally use <code>infection.json5</code> which should be ignored (e.g. in <code>.gitignore</code>).</p>
<blockquote>
<p>By default, Infection uses <a href="https://json5.org/" target="_blank" rel="noopener"><code>json5</code></a> format for configuration file. It allows using comments, ES5-like keys and many more. But if you for some reason can’t use it, Infection also supports <code>json</code> format. </p>
</blockquote>
<h3 id="Configuration-settings"><a href="#Configuration-settings" class="headerlink" title="Configuration settings"></a>Configuration settings</h3><ul>
<li><code>source</code> section:<ul>
<li><code>directories</code> - array, contains all folders with source code you want to mutate. Can be <code>.</code>, but make sure to exclude <code>vendor</code> in this case.</li>
<li><code>excludes</code> - array, contains all folders or files you want to exclude within your source folders. It accepts full paths, as well as regular expressions, enclosed <a href="https://www.php.net/manual/en/regexp.reference.delimiters.php" target="_blank" rel="noopener">by any delimiter accepted by PHP</a>. It accepts glob pattern too. However, its usage is discouraged, as it does not work exactly the same in all OS.<br>Infection automatically excludes <code>vendor</code>, <code>test</code>, <code>tests</code> folders if the source folder is <code>.</code> (current dir). Make sure to not mutate your test suite.<br>Paths under <code>excludes</code> key are relative to the <code>source.directories</code> folders.<br>Here are some examples of <code>excludes</code>, assuming that <code>src</code> is defined in <code>source.directories</code>:<ul>
<li><code>&quot;excludes&quot;: [&quot;Config&quot;]</code> skips the folder <code>src/Config</code>.</li>
<li><code>&quot;excludes&quot;: [&quot;Folder/with/File.php&quot;]</code> skips the file <code>src/Folder/with/File.php</code>.</li>
<li><code>&quot;excludes&quot;: [&quot;/\\.interface\\.php/&quot;]</code> skips all files containing <code>.interface.php</code> in the name.</li>
<li><code>&quot;excludes&quot;: [&quot;{Infrastructure/.*}&quot;]</code> skips all files within <code>src/Infrastructure</code> folder. Note that braces (<code>{}</code>) is a valid regex delimiter in PHP.</li>
<li><code>&quot;excludes&quot;: [&quot;{.*/Infrastructure/.*}&quot;]</code> skips all files within the <code>Infrastructure</code> path of the second level of directories within <code>src</code>. Therefore, <code>src/Shared/Infrastructure</code> or <code>src/SomeBoundedContext/Infrastructure</code> would be excluded, whereas <code>src/Shared/Domain</code> or <code>src/SomeBoundedContext/Application</code> would not.</li>
</ul>
</li>
</ul>
</li>
<li><code>timeout</code> - the maximum allowed time for mutated processes to run, in whole seconds, before they are considered a timeout. Make sure to set it to higher value than your tests are executed in seconds to avoid false-positives.</li>
<li><code>logs</code><ul>
<li><code>text</code> - human-readable text log file. Must see to understand what is going on during mutation process.</li>
<li><code>html</code> - human-readable report, similar to PHPUnit HTML report. Based on <a href="https://stryker-mutator.io/blog/one-mutation-testing-html-report/" target="_blank" rel="noopener">Stryker Elements</a>. Here is <a href="/static/html-report-example.html">an example</a> for Infection itself. If you want to store HTML report in the cloud (useful for OSS projects), see <a href="/guide/mutation-badge.html">Stryker Dashboard</a> integration.</li>
<li><code>summary</code> - summary log file, which will only display the amount of mutants per category, (Killed, Errored, Escaped, Timed Out, <a href="/2020/08/18/whats-new-in-0.17.0/#Skip-S-mutations-that-are-over-specified-time-limit">Skipped</a>, and Not Covered)</li>
<li><code>json</code> - machine-readable file in JSON format. Can be programmatically analyzed. In addition to general stats, contains original, mutated code, diff and test framework output for each Mutant.</li>
<li><code>perMutator</code> - a markdown file which will give a break-down of the effectiveness of each mutator.<br>Each of the above logs accept a local filename to write to (eg <code>infection.log</code>), or you can write to the terminal using <code>php://stdout</code> or <code>php://stderr</code>, this can be useful in CI to store the mutation results in the output.</li>
<li><code>github</code> - prints GitHub Annotation warnings right in the Pull Request. Supposed to be used with GitHub Actions. See <a href="/guide/command-line-options.html#logger-github"><code>--logger-github</code></a>, but usually not necessary as it is automatically detected.</li>
<li><code>gitlab</code> - GitLab (Code Climate) code quality report. Can be processed as a <code>codequality</code> report artifact in Gitlab.</li>
<li><code>summaryJson</code> - machine-readable file in JSON format like <code>json</code> but containing only general stats. Can be programmatically analyzed, for example on CI.</li>
</ul>
</li>
<li><code>tmpDir</code> - Optional. It’s a folder where Infection creates its configs, caches and other stuff. It may be useful for people who doesn’t have access to the default system temporary folder and/or doesn’t have write permissions. Either absolute <code>/tmp/folder</code> or relative <code>var/cache</code> paths can be used.</li>
<li><code>phpUnit</code> - optional key<ul>
<li><code>configDir</code> - custom directory path with <code>phpunit.xml.dist</code> file. This is useful for example for old Symfony app, where <code>phpunit.xml.dist</code> is located at <code>./app</code></li>
<li><code>customPath</code> - custom path to PHPUnit executable. This is useful when you run tests by external shared phar file that is located outside project root.</li>
</ul>
</li>
<li><code>ignoreMsiWithNoMutations</code> - optional key, whether to ignore MSI violations with zero mutations</li>
<li><code>minMsi</code> - optional key, a value for the Minimum Mutation Score Indicator (MSI) percentage value</li>
<li><code>minCoveredMsi</code> - optional key, a value for the Minimum Covered Code Mutation Score Indicator (MSI) percentage value</li>
<li><code>mutators</code>: optional key, it contains the settings for different mutations and profiles, read more about it <a href="/guide/profiles.html">here</a></li>
<li><code>testFramework</code>: optional key, it sets the framework to use for testing. Defaults to <code>phpunit</code>. This gets overridden by the <code>--test-framework</code> command line argument.</li>
<li><code>bootstrap</code>: optional key, use it to specify a file to include as part of the startup to pre-configure the Infection environment. Useful for adding custom autoloaders not included in composer.</li>
<li><code>initialTestsPhpOptions</code>: optional key, specify additional php options for the initial test (IE: Enabling X-Debug). <code>--initial-tests-php-options</code> will override this option.</li>
<li><code>testFrameworkOptions</code>: optional key, specify additional options to pass to the test framework (IE: Enabling Verbose Mode). <code>--test-framework-options</code> will override this option.</li>
</ul>
<h4 id="How-to-use-custom-autoloader-or-bootstrap-file"><a href="#How-to-use-custom-autoloader-or-bootstrap-file" class="headerlink" title="How to use custom autoloader or bootstrap file"></a>How to use custom autoloader or bootstrap file</h4><p>If you have a custom autoloader or bootstrap file for your application, you should tell Infection about it.</p>
<p>For example, you have</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">// custom-autoloader.php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">require</span> <span class="string">'NonPsr4CompliantFile.php'</span>;</span><br></pre></td></tr></table></figure>
<p>then you have to add it to the <code>infection.json5</code> file:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"bootstrap"</span>: <span class="string">"./custom-autoloader.php"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Thus, Infection will know how to autoload <code>NonPsr4CompliantFile</code> class. Without adding it to the config, Infection will not be able to create Mutations because internally it uses <code>new \ReflectionClass()</code> objects.</p>
<h2 id="Running-Infection"><a href="#Running-Infection" class="headerlink" title="Running Infection"></a>Running Infection</h2><p>Ensure that your tests are all in a passing state (incomplete and skipped tests are allowed). Infection will quit if any of your tests are failing.</p>
<p>If you have installed Infection as a global composer package, just run it in your project’s root:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection</span><br></pre></td></tr></table></figure>
<p>or if you cloned it to some folder:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># cd /path/to/project/root</span></span><br><span class="line"></span><br><span class="line">~/infection/bin/infection</span><br></pre></td></tr></table></figure>
<h3 id="Running-with-Xdebug"><a href="#Running-with-Xdebug" class="headerlink" title="Running with Xdebug"></a>Running with <code>Xdebug</code></h3><p>In order to run Infection with Xdebug, you have several options:</p>
<h4 id="Enable-Xdebug-globally"><a href="#Enable-Xdebug-globally" class="headerlink" title="Enable Xdebug globally"></a>Enable Xdebug globally</h4><p>In this case just run</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./infection.phar --threads=4</span><br></pre></td></tr></table></figure>
<h4 id="Enable-Xdebug-per-process"><a href="#Enable-Xdebug-per-process" class="headerlink" title="Enable Xdebug per process"></a>Enable Xdebug per process</h4><p>Since Infection needs Xdebug <em>only</em> to generate code coverage in a separate process, it is possible to enable debugger just there. </p>
<p>Assuming Xdebug is disabled globally, run</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./infection.phar --initial-tests-php-options=<span class="string">"-d zend_extension=xdebug.so"</span></span><br></pre></td></tr></table></figure>
<h3 id="Running-with-phpdbg"><a href="#Running-with-phpdbg" class="headerlink" title="Running with phpdbg"></a>Running with <code>phpdbg</code></h3><p>In order to run Infection with <code>phpdbg</code> instead of Xdebug, you need to execute the following command:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">phpdbg -qrr infection.phar</span><br></pre></td></tr></table></figure>
<h3 id="Running-without-debugger"><a href="#Running-without-debugger" class="headerlink" title="Running without debugger"></a>Running without debugger</h3><p>It is possible to run Infection without any debugger enabled. However, in this case you should provide already generated code coverage as an option</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./infection.phar --coverage=path/to/coverage</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="./command-line-options.html#coverage">Read more</a> what types of coverage Infection requires and how to do it.</p>
</blockquote>
<h3 id="infection-ignore-all-support"><a href="#infection-ignore-all-support" class="headerlink" title="@infection-ignore-all support"></a><code>@infection-ignore-all</code> support</h3><p>Infection supports <code>@infection-ignore-all</code> annotation on class, method, and statement level.</p>
<p>The following class will not be mutated even though it might have few covered lines.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@infection</span>-ignore-all</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(float $a, float $b)</span>: <span class="title">float</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $a + $b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>In this example, method <code>generate()</code> will be skipped from mutation logic, but <code>getDependencies()</code> will be mutated as usual method.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ProductFixture</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@infection</span>-ignore-all</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">generate</span><span class="params">()</span>: <span class="title">void</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="comment">// generate logic</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">getDependencies</span><span class="params">()</span>: <span class="title">array</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> [CategoryFixture::class];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Likewise, given this annotation Infection won’t consider anything in this loop:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** <span class="doctag">@infection</span>-ignore-all */</span></span><br><span class="line"><span class="keyword">foreach</span> ($foo <span class="keyword">as</span> $bar) &#123;</span><br><span class="line">    <span class="comment">// </span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="Exposed-environment-variables"><a href="#Exposed-environment-variables" class="headerlink" title="Exposed environment variables"></a>Exposed environment variables</h2><p>Infection exposes a couple of environment variables:</p>
<ul>
<li><code>INFECTION=1</code> this can be used in test environment to check whether the tests are executed from Infection or not.</li>
<li><code>TEST_TOKEN=&lt;int&gt;</code> for each process that Infection creates for running tests for particular Mutant, it adds <code>TEST_TOKEN=&lt;int&gt;</code> environment variable to be used for setting up connections to different databases. Read more <a href="/guide/how-to.html#How-to-run-Infection-for-functional-tests">here</a>.</li>
</ul>

    
      <div class="guide-links">
        
        
      </div>
    
    <div class="footer">
      Caught a mistake or want to contribute to the documentation?
      <a href="https://github.com/infection/site/blob/master/src/guide/usage.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>
        <script src="/js/theme-switch.js"></script>

        <!-- search -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
        <link rel="stylesheet" href="/css/search.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          docsearch({
              apiKey: '75081c711113ff76f9ed83bf001741a1',
              indexName: 'infection',
              inputSelector: selector,
              debug: false // Set debug to true if you want to inspect the dropdown
          });
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
