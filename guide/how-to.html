
<!DOCTYPE html>
<html lang="en">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>How-to Guides — Infection PHP</title>
        <meta charset="utf-8">
        <meta name="description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="How-to Guides — Infection PHP">
        <meta property="og:description" content="Infection - PHP Mutation Testing Framework.">
        <meta property="og:image" content="https://infection.github.io//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="How-to Guides — Infection PHP">
        <meta name="twitter:description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="twitter:image" content="https://infection.github.io/images/logo.png">

        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Dosis:500&text=Infection PHP" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "guide"</script>
    </head>
    <body class="docs">        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Infection</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-sidebar" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link current">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

    </ul>
    <div class="list">
        <ul class="menu-root">
    
        
        
            
                <li><h3>Documentation</h3></li>
            
            
        
        
        <li>
            <a href="/guide/index.html" class="sidebar-link">Introduction</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/installation.html" class="sidebar-link">Installation</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/usage.html" class="sidebar-link">Usage</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/command-line-options.html" class="sidebar-link">Command Line Options</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/mutators.html" class="sidebar-link">Mutators</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/custom-mutators.html" class="sidebar-link new">Custom Mutators</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/profiles.html" class="sidebar-link">Profiles</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/using-with-ci.html" class="sidebar-link">Using with CI</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/mutation-badge.html" class="sidebar-link">Mutation Badge, cloud HTML report</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/how-to.html" class="sidebar-link current">How-to Guides</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/caveats.html" class="sidebar-link">Caveats</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/debugging-issues.html" class="sidebar-link">Debugging Issues</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/infection-playground.html" class="sidebar-link">Infection Playground</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/github-sponsors.html" class="sidebar-link">GitHub Sponsors ♥️</a>
        </li>
    
        
        
            
            
        
        
        <li>
            <a href="/guide/supported-test-frameworks.html" class="sidebar-link">Supported Test Frameworks</a>
        </li>
    
        
        
            
            
                <li><h3>Miscellaneous</h3></li>
            
        
        
        <li>
            <a href="/guide/compare.html" class="sidebar-link">Compare with competitors</a>
        </li>
    
    <li><h3>Posts</h3></li>
    
        <li>
            <a href="/2022/01/10/whats-new-in-0.26.0/" class="sidebar-link">What's new in Infection 0.26.0</a>
        </li>
    
        <li>
            <a href="/2021/09/06/whats-new-in-0.25.0/" class="sidebar-link">What's new in Infection 0.25.0</a>
        </li>
    
        <li>
            <a href="/2021/07/27/whats-new-in-0.24.0/" class="sidebar-link">What's new in Infection 0.24.0</a>
        </li>
    
        <li>
            <a href="/2021/05/13/whats-new-in-0.23.0/" class="sidebar-link">What's new in Infection 0.23.0</a>
        </li>
    
        <li>
            <a href="/2021/01/27/whats-new-in-0.21.0/" class="sidebar-link">What's new in Infection 0.21.0</a>
        </li>
    
    
</ul>

    </div>
</div>


<div class="content guide with-sidebar how-to-guide">
    
      
    
    
      <h1>How-to Guides</h1>
    
    <h2 id="How-to-run-Infection-only-for-changed-files"><a href="#How-to-run-Infection-only-for-changed-files" class="headerlink" title="How to run Infection only for changed files"></a>How to run Infection only for changed files</h2><p>If you have thousands of files and too many tests, running Mutation Testing can take hours for your project. In this case, it’s very convenient to run it only for the modified files.</p>
<p>Assuming you are on a feature branch, and the main branch is <code>master</code>, we can do it as the following:</p>
<h3 id="By-using-git-diff-filter-option"><a href="#By-using-git-diff-filter-option" class="headerlink" title="By using --git-diff-filter option"></a>By using <code>--git-diff-filter</code> option</h3><p>This option allows filtering files for mutation by using <code>git diff</code> under the hood.</p>
<p>If we want to mutate only <code>A</code>dded and <code>M</code>odified files, use:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection --git-diff-filter=AM</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="/guide/command-line-options.html#git-diff-filter">Read more</a> about <a href="/guide/command-line-options.html#git-diff-filter"><code>--git-diff-filter</code></a></p>
</blockquote>
<h3 id="By-using-git-diff-lines-option"><a href="#By-using-git-diff-lines-option" class="headerlink" title="By using --git-diff-lines option"></a>By using <code>--git-diff-lines</code> option</h3><p>This allows mutating only touched <strong>lines</strong> of code.</p>
<p>Useful to check how your changes impacts MSI in a feature branch. Useful for those who do not want / can’t write tests for the whole touched legacy file, but wants to cover their own changes (only modified lines).</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection --git-diff-lines</span><br></pre></td></tr></table></figure>
<blockquote>
<p><a href="/guide/command-line-options.html#git-diff-lines">Read more</a> about <a href="/guide/command-line-options.html#git-diff-lines"><code>--git-diff-lines</code></a></p>
</blockquote>
<h3 id="By-using-filter-option-for-the-old-Infection-versions"><a href="#By-using-filter-option-for-the-old-Infection-versions" class="headerlink" title="By using --filter option (for the old Infection versions)"></a>By using <code>--filter</code> option (for the old Infection versions)</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">CHANGED_FILES=$(git diff origin/master --diff-filter=AM --name-only | grep src/ | paste -sd <span class="string">","</span> -);</span><br><span class="line">INFECTION_FILTER=<span class="string">"--filter=<span class="variable">$&#123;CHANGED_FILES&#125;</span> --ignore-msi-with-no-mutations"</span>;</span><br><span class="line"></span><br><span class="line">infection --threads=4 <span class="variable">$INFECTION_FILTER</span></span><br></pre></td></tr></table></figure>
<p>The <code>--diff-filter=AM</code> returns only added and modified files, because we are not going to use removed ones.</p>
<p>The <a href="/guide/command-line-options.html#ignore-msi-with-no-mutations"><code>--ignore-msi-with-no-mutations</code> option</a> tells Infection to not error on min MSI when we have <code>0</code> mutations.</p>
<h4 id="Example-for-Travis-CI"><a href="#Example-for-Travis-CI" class="headerlink" title="Example for Travis CI:"></a>Example for Travis CI:</h4><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">jobs</span>:</span><br><span class="line">  include:</span><br><span class="line">    - stage: Mutation Testing</span><br><span class="line">    script:</span><br><span class="line">      - |</span><br><span class="line">        <span class="keyword">if</span> [[ <span class="string">"<span class="variable">$&#123;TRAVIS_PULL_REQUEST&#125;</span>"</span> == <span class="string">"false"</span> ]]; <span class="keyword">then</span></span><br><span class="line">            INFECTION_FILTER=<span class="string">""</span>;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            git remote <span class="built_in">set</span>-branches --add origin <span class="variable">$TRAVIS_BRANCH</span>;</span><br><span class="line">            git fetch;</span><br><span class="line">            CHANGED_FILES=$(git diff origin/<span class="variable">$TRAVIS_BRANCH</span> --diff-filter=AM --name-only | grep src/ | paste -sd <span class="string">","</span> -);</span><br><span class="line">            INFECTION_FILTER=<span class="string">"--filter=<span class="variable">$&#123;CHANGED_FILES&#125;</span> --ignore-msi-with-no-mutations"</span>;</span><br><span class="line">            </span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"CHANGED_FILES=<span class="variable">$CHANGED_FILES</span>"</span>;</span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line">        </span><br><span class="line">        infection --threads=4 --<span class="built_in">log</span>-verbosity=none <span class="variable">$INFECTION_FILTER</span></span><br></pre></td></tr></table></figure>
<p>For each job, Travis CI fetches only tested branch: </p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git <span class="built_in">clone</span> --depth=50 --branch=feature/branch</span><br></pre></td></tr></table></figure>
<p>That’s why we need to fetch <code>$TRAVIS_BRANCH</code> as well to make a <code>git diff</code> possible. Otherwise, you will get an error:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">fatal: ambiguous argument <span class="string">'origin/master'</span>: unknown revision or path not <span class="keyword">in</span> the working tree.</span><br></pre></td></tr></table></figure>
<h2 id="How-to-run-Infection-for-functional-tests"><a href="#How-to-run-Infection-for-functional-tests" class="headerlink" title="How to run Infection for functional tests"></a>How to run Infection for functional tests</h2><p>Imagine you have functional tests that do real SQL queries. Running such tests in parallel impossible without additional work, because 2 different concurrent processes will write to the same tables and conflict with each other.</p>
<p>To fix this issue, Infection provides <code>TEST_TOKEN=&lt;int&gt;</code> environment variable for each process that can be used to set up different connections to the databases.</p>
<p>If you have 3 parallel processes, they will use <code>db_1</code>, <code>db_2</code>, <code>db_3</code> correspondingly.</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection --threads=3</span><br></pre></td></tr></table></figure>
<p>An example of how it can be done for Symfony project with Doctrine:</p>
<figure class="highlight yaml"><figcaption><span>config/packages/test/doctrine.yaml</span></figcaption><table><tr><td class="code"><pre><span class="line"><span class="attr">parameters:</span></span><br><span class="line"><span class="attr">    test_token:</span> <span class="number">1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">doctrine:</span></span><br><span class="line"><span class="attr">    dbal:</span></span><br><span class="line"><span class="attr">        dbname:</span> <span class="string">'db_%env(default:test_token:TEST_TOKEN)%'</span></span><br></pre></td></tr></table></figure>
<p>Or as a plain PHP code:</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line">$dbName = sprintf(<span class="string">'db_%s'</span>, getenv(<span class="string">'TEST_TOKEN'</span>));</span><br></pre></td></tr></table></figure>
<p>For this example to work, you will need to set up 3 database schemas.</p>
<h2 id="How-to-disable-Mutators-and-profiles"><a href="#How-to-disable-Mutators-and-profiles" class="headerlink" title="How to disable Mutators and profiles"></a>How to disable Mutators and profiles</h2><h3 id="Disable-Mutator"><a href="#Disable-Mutator" class="headerlink" title="Disable Mutator"></a>Disable Mutator</h3><p>Mutators can be disabled in a config file - <code>infection.json5</code>. Let’s say you don’t want to mutate <code>+</code> to <code>-</code>. In order to disable this Mutator, the following config can be used: </p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"@default"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"Plus"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>The full list of Mutator names can be found <a href="/guide/mutators.html">here</a>.</p>
</blockquote>
<p>In this example, we explicitly enable all Mutators from <code>@default</code> profile and disable <code>Plus</code> Mutator.</p>
<blockquote>
<p>Read about Profiles <a href="/guide/profiles.html">here</a></p>
</blockquote>
<h3 id="Disable-Profile"><a href="#Disable-Profile" class="headerlink" title="Disable Profile"></a>Disable Profile</h3><p>To disable all Mutators that work with Regular Expressions, we should disable the whole <a href="/guide/profiles.html#regex"><code>@regex</code> profile</a>:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"@default"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"@regex"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="Disable-in-particular-class-or-method-or-line"><a href="#Disable-in-particular-class-or-method-or-line" class="headerlink" title="Disable in particular class or method or line"></a>Disable in particular class or method or line</h3><p>Sometimes you may want to disable Mutator or Profile just for one particular method or class. It’s possible with <code>ignore</code> setting of Mutators and Profiles with the following syntax:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"@default"</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">"@regex"</span>: &#123;</span><br><span class="line">            <span class="attr">"ignore"</span>: [</span><br><span class="line">                <span class="string">"App\\Controller\\User"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Minus"</span>: &#123;</span><br><span class="line">            <span class="attr">"ignore"</span>: [</span><br><span class="line">                <span class="string">"App\\Controller\\User"</span>,</span><br><span class="line">                <span class="string">"App\\Api\\Product::productList"</span>,</span><br><span class="line">                <span class="string">"App\\Api\\Product::product::33"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Want to ignore the whole class? <code>App\Controller\User</code></p>
<p>All classes in the namespace: <code>App\Api\*</code> </p>
<p>All classes <code>Product</code> in any namespace: <code>App\*\Product</code></p>
<p>Method of the class: <code>App\Api\Product::productList</code></p>
<p>Method in all classes: <code>App\Api\*::productList</code></p>
<p>Method by pattern: <code>App\Api\Product::pr?duc?List</code></p>
<p>Line of the code: <code>App\Api\Product::product::33</code></p>
<p>Internally, all patterns are passed to <a href="https://php.net/manual/en/function.fnmatch.php" target="_blank" rel="noopener"><code>fnmatch()</code> PHP function</a>. Please read its documentation to better understand how it works.</p>
<h3 id="Do-not-mutate-the-source-code-matched-by-regular-expression"><a href="#Do-not-mutate-the-source-code-matched-by-regular-expression" class="headerlink" title="Do not mutate the source code matched by regular expression"></a>Do not mutate the source code matched by regular expression</h3><p>You may want to exclude mutations to the code that, if mutated, has little-to-no impact, or, alternatively, sometimes isn’t worth testing the result of - for example calls to a logging function. </p>
<p>If your codebase has lots of logging, this can generate many unwanted mutants and will greatly slow down the mutation test run.</p>
<p>Consider these examples:</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- $this-&gt;logger-&gt;error($message, /* context */ ['user' =&gt; $user]);</span></span><br><span class="line"><span class="addition">+ $this-&gt;logger-&gt;error($message, []);</span></span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- Assert::numeric($string);</span></span><br></pre></td></tr></table></figure>
<p>To avoid them, you can ignore mutations by regular expression, matching the source code:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"global-ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">            <span class="string">"\\$this-&gt;logger.*"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Or just per Mutator:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"MethodRemoval"</span>: &#123;</span><br><span class="line">            <span class="attr">"ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">                <span class="string">"Assert::.*"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Exact matching:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"MethodRemoval"</span>: &#123;</span><br><span class="line">            <span class="attr">"ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">                <span class="string">"Assert::numeric\\(\\$string\\);"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>Ignore any mutants with particular method name, e.g.:</p>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- public function methodCall() &#123;</span></span><br><span class="line"><span class="addition">+ protected function methodCall() &#123;</span></span><br></pre></td></tr></table></figure>
<figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- $this-&gt;methodCall();</span></span><br></pre></td></tr></table></figure>
<p>with the following config:</p>
<figure class="highlight json"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"mutators"</span>: &#123;</span><br><span class="line">        <span class="attr">"global-ignoreSourceCodeByRegex"</span>: [</span><br><span class="line">            <span class="string">".*methodCall.*"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p class="tip">Do not add any delimiters (like <code>/</code>) to the regular expression: we are adding and escaping them for you.</p>

<h3 id="Disable-by-infection-ignore-all-annotation"><a href="#Disable-by-infection-ignore-all-annotation" class="headerlink" title="Disable by @infection-ignore-all annotation"></a>Disable by <code>@infection-ignore-all</code> annotation</h3><p>It’s possible to disable all mutations by adding <code>@infection-ignore-all</code> annotation on class, method, and statement level.</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@infection</span>-ignore-all</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Calculator</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">add</span><span class="params">(float $a, float $b)</span>: <span class="title">float</span></span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> $a + $b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>See other examples <a href="/guide/usage.html#infection-ignore-all-support">here</a>.</p>
<h2 id="How-to-debug-Infection"><a href="#How-to-debug-Infection" class="headerlink" title="How to debug Infection"></a>How to debug Infection</h2><p>Sometimes you need to better understand what’s going on during execution of Infection. </p>
<ul>
<li>to use human-readable log file, use <a href="/guide/usage.html"><code>text</code></a> logger - in <code>infection.json5</code> add <code>logs.text</code> key</li>
<li>information added to <code>text</code> log file is controlled by <a href="/guide/command-line-options.html#log-verbosity"><code>--log-verbosity</code></a></li>
</ul>
<p>When <code>--log-verbosity=all</code> is used, additionally <em>killed</em> and <em>errored</em> mutants will be added to the log file.</p>
<blockquote>
<p>The verbosity of the log file, <code>all</code> - this mode will add <code>“Killed mutants”</code> into log file and add additional information, <code>default</code> - normal mode will skip <code>“Killed mutants”</code> section in the log file, <code>none</code> - which will disable logging to files.</p>
</blockquote>
<p>Use the following config file</p>
<figure class="highlight json"><figcaption><span>infection.json5</span></figcaption><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"logs"</span>: &#123;<span class="attr">"text"</span>: <span class="string">"infection.log"</span>&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and execute Infection with</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection --<span class="built_in">log</span>-verbosity=all</span><br></pre></td></tr></table></figure>
<p>If you want to also log PHPUnit’s output, as well as CLI commands that are executed internally by Infection, use <a href="/guide/command-line-options.html#debug"><code>--debug</code></a></p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">infection --<span class="built_in">log</span>-verbosity=all --debug</span><br></pre></td></tr></table></figure>

    
      <div class="guide-links">
        
        
      </div>
    
    <div class="footer">
      Caught a mistake or want to contribute to the documentation?
      <a href="https://github.com/infection/site/blob/master/src/guide/how-to.md" target="_blank">
        Edit this page on Github!
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>
        <script src="/js/theme-switch.js"></script>

        <!-- search -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
        <link rel="stylesheet" href="/css/search.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          docsearch({
              apiKey: '75081c711113ff76f9ed83bf001741a1',
              indexName: 'infection',
              inputSelector: selector,
              debug: false // Set debug to true if you want to inspect the dropdown
          });
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
