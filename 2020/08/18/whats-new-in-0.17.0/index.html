
<!DOCTYPE html>
<html lang="en">
    <head><meta name="generator" content="Hexo 3.8.0">
        <title>What's new in Infection 0.17.0 â€” Infection PHP</title>
        <meta charset="utf-8">
        <meta name="description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

        <meta property="og:type" content="article">
        <meta property="og:title" content="What's new in Infection 0.17.0 â€” Infection PHP">
        <meta property="og:description" content="Infection - PHP Mutation Testing Framework.">
        <meta property="og:image" content="https://infection.github.io//images/logo.png">

        <meta name="twitter:card" content="summary">
        <meta name="twitter:title" content="What's new in Infection 0.17.0 â€” Infection PHP">
        <meta name="twitter:description" content="Infection - PHP Mutation Testing Framework.">
        <meta name="twitter:image" content="https://infection.github.io/images/logo.png">

        <link rel="apple-touch-icon" sizes="180x180" href="/images/icons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="192x192" href="/images/icons/android-icon-192x192.png">
        <link rel="icon" type="image/png" sizes="32x32" href="/images/icons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/images/icons/favicon-16x16.png">
        <link rel="icon" href="/images/logo.png" type="image/png">

        <meta name="msapplication-TileColor" content="#4fc08d">
        <meta name="theme-color" content="#4fc08d">

        <meta name="msapplication-config" content="browserconfig.xml">
        <link rel="manifest" href="/manifest.json">

        <link href="//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,600|Roboto Mono" rel="stylesheet" type="text/css">
        <link href="//fonts.googleapis.com/css?family=Dosis:500&text=Infection PHP" rel="stylesheet" type="text/css">

        <!-- main page styles -->
        <link rel="stylesheet" href="/css/page.css">

        <!-- this needs to be loaded before guide's inline scripts -->
        <script src="/js/vue.js"></script>
        <script>window.PAGE_TYPE = "{{type}}"</script>
    </head>
    <body class="docs">        <div id="mobile-bar">
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Infection</span>
  </a>
  <ul id="nav">
    <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    <div class="sidebar blog">
    <ul class="main-menu">
        <li>
  <form id="search-form">
    <input type="text" id="search-query-nav" class="search-query st-default-search-input">
  </form>
</li>
<li><a href="/guide/" class="nav-link">Guide</a></li>
<li><a href="https://infection-php.dev/" target="_blank">Playground</a></li>
<li><a href="https://github.com/infection/infection" target="_blank">GitHub</a></li>
<li class="nav-dropdown-container ecosystem">
  <a class="nav-link">Ecosystem</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><h4>Help</h4></li>
    <li><ul>
      <li><a href="https://twitter.com/infection_php" class="nav-link" target="_blank">Twitter</a></li>
      <li><a href="https://mastodon.social/@infection_php" class="nav-link" target="_blank">Mastodon </a></li>
      <li><a href="https://discord.gg/ZUmyHTJ" class="nav-link" target="_blank">Discord </a></li>
      <li><a href="https://github.com/infection/infection/discussions" class="nav-link" target="_blank">Infection Discussions </a></li>
    </ul></li>
    <li><h4>Resource Lists</h4></li>
    <li><ul>
      <li><a href="https://github.com/infection" class="nav-link" target="_blank">Official Repos</a></li>
    </ul></li>
  </ul>
</li>



<li>
    <a id="theme-toggle" style="cursor: pointer;">
        <i id="theme-toggle-icon" class="theme-icon"></i>
    </a>
</li>

    </ul>
    <div class="list">
        <h2>
            Recent Posts
            <a href="/atom.xml" target="_blank" style="vertical-align: middle; margin-left: 5px">
                <img src="/images/feed.png" style="width:15px;height:15px">
            </a>
        </h2>
        <ul style="padding:0">
        
            <li>
                <a href="/2022/01/10/whats-new-in-0.26.0/" class="sidebar-link">What's new in Infection 0.26.0</a>
            </li>
        
            <li>
                <a href="/2021/09/06/whats-new-in-0.25.0/" class="sidebar-link">What's new in Infection 0.25.0</a>
            </li>
        
            <li>
                <a href="/2021/07/27/whats-new-in-0.24.0/" class="sidebar-link">What's new in Infection 0.24.0</a>
            </li>
        
            <li>
                <a href="/2021/05/13/whats-new-in-0.23.0/" class="sidebar-link">What's new in Infection 0.23.0</a>
            </li>
        
            <li>
                <a href="/2021/01/27/whats-new-in-0.21.0/" class="sidebar-link">What's new in Infection 0.21.0</a>
            </li>
        
            <li>
                <a href="/2020/11/01/whats-new-in-0.20.0/" class="sidebar-link">What's new in Infection 0.20.0</a>
            </li>
        
            <li>
                <a href="/2020/10/28/whats-new-in-0.19.0/" class="sidebar-link">What's new in Infection 0.19.0</a>
            </li>
        
            <li>
                <a href="/2020/10/17/whats-new-in-0.18.0/" class="sidebar-link">What's new in Infection 0.18.0</a>
            </li>
        
            <li>
                <a href="/2020/08/18/whats-new-in-0.17.0/" class="sidebar-link current">What's new in Infection 0.17.0</a>
            </li>
        
            <li>
                <a href="/2020/03/28/whats-new-in-0.16.0/" class="sidebar-link">What's new in Infection 0.16.0</a>
            </li>
        
        </ul>
    </div>
</div>
<div class="content with-sidebar blog post">
    <h1>What's new in Infection 0.17.0</h1>
    <h4>Aug 18, 2020</h4>
    <p>Release: <a href="https://github.com/infection/infection/releases/tag/0.17.0" target="_blank" rel="noopener">https://github.com/infection/infection/releases/tag/0.17.0</a></p>
<h2 id="BC-Breaks"><a href="#BC-Breaks" class="headerlink" title="BC Breaks"></a>BC Breaks</h2><h3 id="U-for-uncovered"><a href="#U-for-uncovered" class="headerlink" title="U for uncovered"></a><code>U</code> for uncovered</h3><p>Previously, all uncovered by tests mutations were marked as <code>S</code> in the Infectionâ€™s output. Now, <code>S</code> is for <code>Skipped</code>. <code>U</code> is for <code>Uncovered</code>. See below.</p>
<h3 id="Skip-S-mutations-that-are-over-specified-time-limit"><a href="#Skip-S-mutations-that-are-over-specified-time-limit" class="headerlink" title="Skip (S) mutations that are over specified time limit"></a>Skip (<code>S</code>) mutations that are over specified time limit</h3><p><a href="https://github.com/infection/infection/pull/1171" target="_blank" rel="noopener">#1171</a> Exclude mutations that are over specified time limit.</p>
<p>In addition to code coverage reports, Infection collects execution time report, thus Infection can execute the fastest tests first. Consider that for a given line you may have several tests taking a certain amount of time, say, 20 seconds. If you happen to have a timeout of 15 seconds configured, earlier Infection would have tried to run these tests anyway, even if we can tell beforehand that they will result in a timeout, exhausting allotted time.</p>
<p>With this version, Infection would try to skip these over-time-budged mutations. This change considerably speeds up mutation testing for projects with incoherent test coverage, while still letting to reap the benefits of mutation testing where it is possible.</p>
<p>For example, if one has a 15-second long integration test, setting a time limit to 10 seconds will effectively exclude all mutations covered by the test. Now one has a choice of either raising the timeout or tagging this test with a <code>@coversNothing</code> annotation.</p>
<h2 id="Infection-Playground"><a href="#Infection-Playground" class="headerlink" title="Infection Playground"></a>Infection Playground</h2><p>We are happy to introduce <a href="https://infection-php.dev/" target="_blank" rel="noopener">Infection Playground</a> ðŸŽ‰ðŸš€. </p>
<p>This is Mutation Testing with <code>Infection</code> right in your browser!</p>
<p>You can write the code, write the tests, click <code>Run</code> and see Mutation Testing results.</p>
<p>Here are several reasons why we decided to create Infection Playground:</p>
<ul>
<li>spread mutation testing across more people</li>
<li>make it unbelievable easy to try Mutation Testing in PHP - right in your browser. No projects to create locally, no need to install <code>Composer</code>, <code>Infection</code>, <code>PHPUnit</code> - nothing. Just type a couple of lines of the source code, write a test and click <code>Run</code>.</li>
<li>provide people a good tool to report issues for <code>Infection</code>. We hope it will be easier for developers to just create an example on <a href="https://infection-php.dev" target="_blank" rel="noopener">https://infection-php.dev</a> site and post a permanent link to GitHubâ€™s issue rather than creating standalone repository or even worse not giving an example at all</li>
<li>real examples for the documentation, e.g. Mutators. These are for <a href="https://infection-php.dev/r/qxk" target="_blank" rel="noopener">PublicVisibility</a> and <a href="https://infection-php.dev/r/j0l" target="_blank" rel="noopener">ProtectedVisibility</a></li>
</ul>
<p>Try it. Share your results with colleagues. Experiment with it.</p>
<p>Quick reminder that most popular tools in PHP ecosystem have playgrounds as well:</p>
<ul>
<li>PHPStan: <a href="https://phpstan.org/r/d650ce41-9691-40d3-b413-cadbe04e0163" target="_blank" rel="noopener">https://phpstan.org/r/d650ce41-9691-40d3-b413-cadbe04e0163</a></li>
<li>Psalm: <a href="https://psalm.dev/r/ed3124e0b3" target="_blank" rel="noopener">https://psalm.dev/r/ed3124e0b3</a></li>
<li>Rector: <a href="https://getrector.org/demo/c4f35db2-fe8d-4dde-bf3c-29c580dc60a1" target="_blank" rel="noopener">https://getrector.org/demo/c4f35db2-fe8d-4dde-bf3c-29c580dc60a1</a></li>
</ul>
<h2 id="New-features-and-enhancements"><a href="#New-features-and-enhancements" class="headerlink" title="New features and enhancements"></a>New features and enhancements</h2><h3 id="JSON-logger"><a href="#JSON-logger" class="headerlink" title="JSON logger"></a><code>JSON</code> logger</h3><p>We have a new <code>JSON</code> logger that can be useful for CI and any other place where results of Mutation Testing need to be analyzed <strong>programmatically</strong>.</p>
<p>This logger is used by Infection Playground to build the following UI:</p>
<p><img src="/images/posts/0-17-0/json_logger_ui.png" alt="jsonlogger"></p>
<p>This report contains all the mutations (killed, escaped, timeouted, uncovered, etc.), original and mutated code and <em>result output of a test framework</em> for each Mutant.</p>
<h3 id="Set-failOnRisky-failOnWarning-to-true-if-parameters-are-not-already-set"><a href="#Set-failOnRisky-failOnWarning-to-true-if-parameters-are-not-already-set" class="headerlink" title="Set failOnRisky, failOnWarning to true if parameters are not already set"></a>Set <code>failOnRisky</code>, <code>failOnWarning</code> to <code>true</code> if parameters are not already set</h3><p><a href="https://github.com/infection/infection/issues/1273" target="_blank" rel="noopener">#1273</a> showed that there are cases where a mutation may cause a test to become risky, yet these tests are not a cause of failure for PHPUnit by default.</p>
<p>Since PHPUnit wonâ€™t treat new risky tests as failures by default, and since this behavior causes an unnecessary confusion even for experienced users (see #1273), we now add <code>failOnRisky=&quot;true&quot;</code> and <code>failOnWarning=&quot;true&quot;</code> by default unless a conflicting directive is present.</p>
<h3 id="force-progress-option"><a href="#force-progress-option" class="headerlink" title="--force-progress option"></a><code>--force-progress</code> option</h3><p>Previously, we introduced <a href="/guide/command-line-options.html#no-progress"><code>--no-progress</code></a> option that is automatically enabled on CI.</p>
<ul>
<li>It disables intermediate buffering of mutations used to count them. This causes progress bars to not have a total number of mutations displayed, while also reducing memory usage and speeding up the entire process. It is beneficial during CI, and for larger projects.</li>
<li>It disables dynamic progress bars output to reduce the amount of generated text output.</li>
</ul>
<p>Now, if you want to opt-out from this autoenabled behavior on CI, you can use <code>--force-progress</code> option. It outputs progress bars and mutation count during progress even if a CI is detected.</p>
<h2 id="New-Mutators"><a href="#New-Mutators" class="headerlink" title="New Mutators"></a>New Mutators</h2><h3 id="InstanceOf-mutator"><a href="#InstanceOf-mutator" class="headerlink" title="InstanceOf_ mutator"></a><code>InstanceOf_</code> mutator</h3><figure class="highlight diff"><table><tr><td class="code"><pre><span class="line"><span class="deletion">- if ($node instanceof Node\Expr\Closure) &#123;</span></span><br><span class="line"><span class="addition">+ if (true) &#123;</span></span><br><span class="line"><span class="addition">+ if (false) &#123;</span></span><br></pre></td></tr></table></figure>
<p>Replaces: <code>$foo instanceof Anything</code></p>
<p>With either <code>true</code> or <code>false</code>.</p>
<ul>
<li>When <code>true</code> we assume the value always of the same type, and the check is redundant.</li>
<li>When <code>false</code> we assume the testing isnâ€™t thorough.</li>
</ul>

</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
        

        <!-- main custom script for sidebars, version selects etc. -->
        <script src="/js/css.escape.js"></script>
        <script src="/js/common.js"></script>
        <script src="/js/theme-switch.js"></script>

        <!-- search -->
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.css">
        <link rel="stylesheet" href="/css/search.css">
        <script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/2/docsearch.min.js"></script>
        <script>
        [
          '#search-query-nav',
          '#search-query-sidebar',
          '#search-query-menu'
        ].forEach(function (selector) {
          if (!document.querySelector(selector)) return
          docsearch({
              apiKey: '75081c711113ff76f9ed83bf001741a1',
              indexName: 'infection',
              inputSelector: selector,
              debug: false // Set debug to true if you want to inspect the dropdown
          });
        })
        </script>

        <!-- fastclick -->
        <script src="//cdnjs.cloudflare.com/ajax/libs/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
        document.addEventListener('DOMContentLoaded', function() {
          FastClick.attach(document.body)
        }, false)
        </script>
    </body>
</html>
